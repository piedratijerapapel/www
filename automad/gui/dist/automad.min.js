/*
 *	                  ....
 *	                .:   '':.
 *	                ::::     ':..
 *	                ::.         ''..
 *	     .:'.. ..':.:::'    . :.   '':.
 *	    :.   ''     ''     '. ::::.. ..:
 *	    ::::.        ..':.. .''':::::  .
 *	    :::::::..    '..::::  :. ::::  :
 *	    ::'':::::::.    ':::.'':.::::  :
 *	    :..   ''::::::....':     ''::  :
 *	    :::::.    ':::::   :     .. '' .
 *	 .''::::::::... ':::.''   ..''  :.''''.
 *	 :..:::'':::::  :::::...:''        :..:
 *	 ::::::. '::::  ::::::::  ..::        .
 *	 ::::::::.::::  ::::::::  :'':.::   .''
 *	 ::: '::::::::.' '':::::  :.' '':  :
 *	 :::   :::::::::..' ::::  ::...'   .
 *	 :::  .::::::::::   ::::  ::::  .:'
 *	  '::'  '':::::::   ::::  : ::  :
 *	            '::::   ::::  :''  .:
 *	             ::::   ::::    ..''
 *	             :::: ..:::: .:''
 *	               ''''  '''''
 *	
 *
 *	AUTOMAD GUI 
 *	
 *	version 1.2.3
 *
 *	Copyright (c) 2014-2019 by Marc Anton Dahmen
 *	http://marcdahmen.de
 *
 *	Licensed under the MIT license.
 *	http://automad.org/license
 */+function(t,a,e){t.addVariable={selectors:{container:"#am-add-variable-container",modal:"#am-add-variable-modal",modalInput:"#am-add-variable-input",submit:"#am-add-variable-submit"},dataAttr:{errorName:"data-am-error-name",errorExists:"data-am-error-exists"},append:function(o){var n=t.addVariable,i=t.util,d=a(o.target),r=a(n.selectors.container),l=a(n.selectors.modalInput),s=l.val().replace(/[^\w\.\-]/g,"_").toLowerCase();0==a("#am-input-data-"+s).length?s?a.post("?ajax=add_variable",{name:s
},function(t){e.modal(n.selectors.modal).hide(),l.val(""),r.append(t),a("#am-input-data-"+s).focus()}):t.notify.error(d.data(i.dataCamelCase(n.dataAttr.errorName))):t.notify.error(d.data(i.dataCamelCase(n.dataAttr.errorExists)))}},a(document).on("click",t.addVariable.selectors.submit,t.addVariable.append)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a){t.autocomplete={data:{},selectors:{submit:"[data-am-autocomplete-submit]"},submitForm:function(t){t.preventDefault()
;var e=a(t.target).closest("form");setTimeout(function(){e.submit()},50)}},a(document).on("ready",function(){a(".am-dashboard").length>0&&a.post("?ajax=autocomplete",function(a){t.autocomplete.data=a},"json")}),a(document).on("keydown",t.autocomplete.selectors.submit+' .am-u-autocomplete input[type="search"]',function(a){13==a.which&&t.autocomplete.submitForm(a)}),a(document).on("click",t.autocomplete.selectors.submit+" .am-u-dropdown a",t.autocomplete.submitForm)
}(window.Automad=window.Automad||{},jQuery),function(t,a){t.clipboard={dataAttr:"data-am-clipboard",copy:function(e){e.preventDefault();var o=a(this).data(t.util.dataCamelCase(t.clipboard.dataAttr)),n=a('<input type="text" />').css({position:"fixed",top:-1e3}).attr("contenteditable","true").appendTo(a("body")).val(o),i=!1;if(navigator.userAgent.match(/ipad|ipod|iphone/i)){var d=n.get(0),r=document.createRange(),l=window.getSelection();r.selectNodeContents(d),l.removeAllRanges(),l.addRange(r),
d.setSelectionRange(0,999999)}else n.select();i=document.execCommand("copy"),n.remove(),i&&t.notify.success(o)}},a(document).on("click","["+t.clipboard.dataAttr+"]",t.clipboard.copy)}(window.Automad=window.Automad||{},jQuery),function(t,a,e){t.copyResized={dataAttr:{fileInfo:"data-am-file-info",url:"data-am-url"},selectors:{modal:"#am-copy-resized-modal",button:"#am-copy-resized-submit",filename:"#am-copy-resized-filename",width:"#am-copy-resized-width",height:"#am-copy-resized-height",
crop:"#am-copy-resized-crop"},destroy:function(){var e=t.copyResized.selectors;a(e.filename).val(""),a(e.width).val(""),a(e.height).val("")},init:function(){var e=t.copyResized,o=e.dataAttr,n=e.selectors,i=a(this).closest("["+o.fileInfo+"]"),d=i.data(t.util.dataCamelCase(o.fileInfo)),r=a(n.modal);a(n.filename).val(d.filename),a(n.width).val(d.img.originalWidth),a(n.height).val(d.img.originalHeight),r.off("hide.uk.modal.automad.copyResized"),r.on("hide.uk.modal.automad.copyResized",e.destroy)},
submit:function(o){var n=t.copyResized,i=n.selectors,d=a(o.target),r={url:a(i.modal).data(t.util.dataCamelCase(n.dataAttr.url)),filename:a(i.filename).val(),width:a(i.width).val(),height:a(i.height).val(),crop:Number(a(i.crop).is(":checked"))};d.prop("disabled",!0),a.post("?ajax=copy_resized",r,function(o){d.prop("disabled",!1),o.debug&&t.debug.log("copy_resized",o.debug),o.error&&t.notify.error(o.error),o.success&&t.notify.success(o.success),
a(i.modal).on("hide.uk.modal.automad.copyResized",function(){n.destroy(),a(i.modal).closest("form").empty().submit()}),e.modal(i.modal).hide()},"json")}},a(document).on("click",'a[href="'+t.copyResized.selectors.modal+'"]',t.copyResized.init),a(document).on("click",t.copyResized.selectors.button,t.copyResized.submit)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a){t.count={dataAttr:"data-am-count",get:function(e){var o=t.count;a("["+o.dataAttr+"]").each(function(){
var e=a(this),n=e.data(t.util.dataCamelCase(o.dataAttr));e.text(a(n).length)})},init:function(){var e=t.count;a(document).on("ready ajaxComplete count.automad",e.get)}},t.count.init()}(window.Automad=window.Automad||{},jQuery),function(t,a){t.datetime={selector:"[data-am-datetime]",init:function(){var e=a(document),o=t.datetime;e.on("change",o.selector+" [data-am-u-datepicker]",o.update.date),e.on("change",o.selector+" [data-am-u-timepicker]",o.update.time),
e.on("focus",o.selector+" input",function(t){var e=a(t.target),n=e.closest(o.selector);n.addClass("am-u-active"),e.on("blur.automad",function(){n.removeClass("am-u-active"),e.off("blur.automad")})}),e.on("click",o.selector+" [data-am-clear-date]",function(){var t=a(this).closest(o.selector);t.find("[data-am-u-timepicker]").val(""),t.find("[data-am-u-datepicker]").val("").trigger("change")})},today:function(){var t=new Date,a=t.getMonth()+1,e=t.getDate()
;return t.getFullYear()+"-"+((""+a).length<2?"0":"")+a+"-"+((""+e).length<2?"0":"")+e},update:{date:function(e){var o=a(e.target),n=t.datetime,i=o.closest(n.selector),d=i.find('input[type="hidden"]'),r=o.val(),l=i.find("[data-am-u-timepicker]");time=l.val(),r?(time||(time="12:00",l.val(time)),d.val(r+" "+time+":00")):(d.val(""),l.val("")),d.trigger("change")},time:function(e){
var o=a(e.target),n=t.datetime,i=o.closest(n.selector),d=i.find('input[type="hidden"]'),r=o.val(),l=i.find("[data-am-u-datepicker]");date=l.val(),r||(r="12:00",o.val(r)),date||(date=n.today(),l.val(date)),d.val(date+" "+r+":00").trigger("change")}}},t.datetime.init()}(window.Automad=window.Automad||{},jQuery),function(t,a){t.debug={log:function(t,a){var e={};e["Ajax: "+t]=a,console.log(e)}}}(window.Automad=window.Automad||{},jQuery),function(t,a,e){t.editFileInfo={dataAttr:{
fileInfo:"data-am-file-info",url:"data-am-url",ext:"data-am-extension"},selectors:{modal:"#am-edit-file-info-modal",button:"#am-edit-file-info-submit",img:"#am-edit-file-info-img",icon:"#am-edit-file-info-icon",oldName:"#am-edit-file-info-old-name",newName:"#am-edit-file-info-new-name",caption:"#am-edit-file-info-caption",download:"#am-edit-file-info-download"},destroy:function(){var e=t.editFileInfo,o=e.dataAttr,n=e.selectors;a(n.img).attr("src","").removeAttr("width").removeAttr("height"),
a(n.icon).attr(o.ext,"").html(""),a(n.download).attr("href",""),a(n.oldName).val(""),a(n.newName).val(""),a(n.caption).val("").trigger("keyup")},init:function(){var e=t.editFileInfo,o=t.util,n=e.dataAttr,i=e.selectors,d=a(this).closest("["+n.fileInfo+"]"),r=d.data(o.dataCamelCase(n.fileInfo)),l=a(i.modal);r.img?a(i.img).attr("src",r.img.src).attr("width",r.img.width).attr("height",r.img.height):a(i.icon).attr(n.ext,r.extension).append(a("<i></i>",{
class:"am-u-icon-file-o am-files-icon-"+r.extension})),a(i.oldName).val(r.filename),a(i.newName).val(r.filename),a(i.caption).val(r.caption).trigger("keyup"),a(i.download).attr("href",r.download),l.off("hide.uk.modal.automad.editFileInfo"),l.on("hide.uk.modal.automad.editFileInfo",e.destroy)},submit:function(o){var n=t.editFileInfo,i=n.selectors,d=a(o.target),r={url:a(i.modal).data(t.util.dataCamelCase(n.dataAttr.url)),"old-name":a(i.oldName).val(),"new-name":a(i.newName).val(),
caption:a(i.caption).val()};d.prop("disabled",!0),a.post("?ajax=edit_file_info",r,function(o){d.prop("disabled",!1),o.error&&t.notify.error(o.error),a(i.modal).on("hide.uk.modal.automad.editFileInfo",function(){n.destroy(),a(i.modal).closest("form").empty().submit()}),e.modal(i.modal).hide()},"json")}},a(document).on("click",'a[href="'+t.editFileInfo.selectors.modal+'"]',t.editFileInfo.init),a(document).on("click",t.editFileInfo.selectors.button,t.editFileInfo.submit)
}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a,e){t.form={unsavedClassPrefix:"am-unsaved-",unsavedClassInput:"am-form-changed",dataAttr:{handler:"data-am-handler",url:"data-am-url",submit:"data-am-submit",init:"data-am-init",autoSubmit:"data-am-auto-submit",close:"data-am-close-on-success",confirm:"data-am-confirm",enter:"data-am-enter",watchExclude:"data-am-watch-exclude",modalOnChange:"data-am-modal-on-change"},ajaxPost:function(o){var n=t.form,i=(n.dataAttr,
a(o.target)),d=i.data(t.util.dataCamelCase(n.dataAttr.handler)),r=i.data(t.util.dataCamelCase(n.dataAttr.url)),l=i.serializeArray();r&&l.push({name:"url",value:r}),a.post("?ajax="+d,l,function(a){if(a.debug&&t.debug.log(d,a.debug),a.redirect&&(window.location.href=a.redirect),a.html&&i.html(a.html),a.error&&t.notify.error(a.error),a.success&&t.notify.success(a.success),!a.error){var o=i.data(t.util.dataCamelCase(n.dataAttr.close));o&&e.modal(o).hide()}},"json")},confirm:function(o){
o.preventDefault();var n=t.form,i=a(o.target),d=i.data(t.util.dataCamelCase(n.dataAttr.confirm));d&&i.find("input").length>0?e.modal.confirm(d,function(){n.ajaxPost(o)}):n.ajaxPost(o)},init:function(){var o=a(document),n=t.form,i=n.dataAttr;o.on("submit","["+i.handler+"]",n.confirm),o.on("click","["+i.submit+"]",function(e){var o=a(this).data(t.util.dataCamelCase(i.submit));e.preventDefault(),a("form["+i.handler+'="'+o+'"]').submit()}),o.ready(function(){
a("["+t.form.dataAttr.init+"]").trigger("submit")}),o.on("keydown","["+i.handler+"] input",function(t){13==t.which&&t.preventDefault()}),o.on("keydown","["+i.enter+"]",function(e){if(13==e.which){var o=a(e.target).data(t.util.dataCamelCase(i.enter));a(o).click()}}),o.on("change drop cut paste","["+i.autoSubmit+"] input, ["+i.autoSubmit+"] textarea, ["+i.autoSubmit+"] select",function(t){a(t.target).closest("form").submit()}),o.on("ready",function(){a("button["+i.submit+"]").prop("disabled",!0)
}),o.on("ajaxComplete",function(t,e,o){var d=o.url.replace("?ajax=","");a("button["+i.submit+'="'+d+'"]').prop("disabled",!0),a("["+i.handler+'="'+d+'"]').find("."+n.unsavedClassInput).removeClass(n.unsavedClassInput)}),o.on("change drop cut paste keydown","["+i.handler+"]:not(["+i.autoSubmit+"]) input:not(["+i.watchExclude+"]), ["+i.handler+"]:not(["+i.autoSubmit+"]) textarea:not(["+i.watchExclude+"]), ["+i.handler+"]:not(["+i.autoSubmit+"]) select:not(["+i.watchExclude+"])",function(){
var e=a(this).closest("["+i.handler+"]"),o=e.data(t.util.dataCamelCase(i.handler));a("html").addClass(n.unsavedClassPrefix+o),a("button["+i.submit+'="'+o+'"]:disabled').prop("disabled",!1),a(this).prevAll(".am-u-form-label").addClass(n.unsavedClassInput),a(this).closest(".am-u-form-icon, [data-am-toggle], [data-am-datetime]").prev(".am-u-form-label").addClass(n.unsavedClassInput),a(this).closest(".am-u-htmleditor").closest("[data-am-u-tooltip]").prev(".am-u-form-label").addClass(n.unsavedClassInput),
a(this).closest(".am-u-grid").prev(".am-u-form-label").addClass(n.unsavedClassInput)}),o.on("submit","["+i.handler+"]",function(){var e=a(this).data(t.util.dataCamelCase(i.handler));a("html").removeClass(n.unsavedClassPrefix+e)}),window.onbeforeunload=function(){if(a('html[class*="am-unsaved-"]').length)return"You have unsaved chages!"},o.on("change","["+i.modalOnChange+"]",function(){e.modal(a(this).data(t.util.dataCamelCase(i.modalOnChange))).show()}),o.on("ready ajaxComplete",n.modalEvents),
o.on("ready ajaxComplete",function(){setTimeout(function(){a(".CodeMirror:not(.am-change-event)").each(function(){var t=a(this),e=t[0].CodeMirror,o=t.prev();t.addClass("am-change-event"),e.on("change",function(){o.trigger("change")})})},500)})},modalEvents:function(){var e=a(".am-u-modal");e.off("show.uk.modal.automad.form"),e.off("hide.uk.modal.automad.form"),e.on({"show.uk.modal.automad.form":function(){a(this).find("["+t.form.dataAttr.init+"]").each(function(){a(this).empty().submit()}),
a("html.am-u-notouch").length&&a(this).find('input:not(:disabled, [type="hidden"], [type="search"])').first().focus()},"hide.uk.modal.automad.form":function(){a(this).find("form").each(function(){var e=a(this).data(t.util.dataCamelCase(t.form.dataAttr.handler));a("html").removeClass(t.form.unsavedClassPrefix+e),this.reset()})}})}},t.form.init()}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a){a.on("beforeready.uk.dom",function(){t.extend(a.components.htmleditor.prototype.defaults,{
markdown:!0,codemirror:{mode:"gfm",lineWrapping:!0,dragDrop:!1,autoCloseTags:!1,matchTags:!1,autoCloseBrackets:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!1,tabSize:4,hintOptions:{completionSingle:!1},extraKeys:{Enter:"newlineAndIndentContinueMarkdownList"}},toolbar:["bold","italic","link","image","blockquote","listUl","listOl"]})})}(jQuery,UIkit),function(t,a){t.inPage={selectors:{modal:"#am-inpage-edit-modal",title:"#am-inpage-edit-modal-title",fields:"#am-inpage-edit-fields",
menubar:".am-inpage-menubar",dragHandle:".am-drag-handle"},dataAttr:{content:"data-am-inpage-content",handler:"data-am-inpage-handler",url:"data-am-inpage-url"},modal:{init:function(){var e=a(this),o=t.inPage,n=t.util,i=e.data(n.dataCamelCase(o.dataAttr.content)),d=a(o.selectors.modal),r=a(o.selectors.title),l=d.find("form"),s=l.data(n.dataCamelCase(o.dataAttr.handler)),u=a("<i></i>",{class:"am-u-icon-circle-o-notch am-u-icon-spin am-u-icon-small"}).insertAfter(r.parent()),c=l.find(".am-u-modal-footer")
;r.empty(),a(o.selectors.fields).remove(),a.post(s,i,function(t){if(t.html){var e=a(t.html).insertBefore(c).hide(),o=e.find('[name="context"]').val();r.text(o),setTimeout(function(){a(window).resize()},400),setTimeout(function(){u.remove(),e.fadeIn(300,function(){a(window).resize(),e.find(".am-u-form-controls, textarea").focus()})},600)}},"json")},submit:function(e){e.preventDefault();var o=a(e.target),n=o.data(t.util.dataCamelCase(t.inPage.dataAttr.handler)),i=o.serializeArray()
;a.post(n,i,function(a){a.debug&&t.debug.log(n,a.debug),a.redirect&&(window.location.href=a.redirect)},"json")}},menubar:{init:function(){var e=t.inPage.selectors;a(e.menubar).draggabilly({handle:e.dragHandle})}}},a(document).on("click",'[href="'+t.inPage.selectors.modal+'"]',t.inPage.modal.init),a(document).on("submit","["+t.inPage.dataAttr.handler+"]",t.inPage.modal.submit),a(document).on("ready",t.inPage.menubar.init)}(window.Automad=window.Automad||{},jQuery),function(t){
t(document).ready(function(){t("#am-no-js").remove()})}(jQuery),function(t,a){t.keyCombos={init:function(){a(window).bind("keydown",function(t){if(t.ctrlKey||t.metaKey)switch(String.fromCharCode(t.which).toLowerCase()){case"s":t.preventDefault(),a('.am-navbar [data-am-submit], .am-inpage .am-u-open [type="submit"]').click();break;case" ":t.preventDefault(),a('.am-navbar-search [name="query"]').focus()}})}},t.keyCombos.init()}(window.Automad=window.Automad||{},jQuery),function(t,a,e){t.notify={
error:function(t){e.notify(t,{timeout:0,pos:"top-right",status:"danger"})},success:function(t){e.notify(t,{timeout:3e3,pos:"top-right",status:"success"})}}}(window.Automad=window.Automad||{},jQuery,UIkit),function(t){t(document).on("click",".am-remove-parent",function(){var a=t(this).parent();a.find("input, textarea").trigger("change"),a.remove(),t(document).trigger("count.automad")})}(jQuery),function(t,a){t.scrollPosition={init:function(){var t=a(document),e=a("html")
;a(window).scroll(function(){this.scrolling&&clearTimeout(this.scrolling),this.scrolling=setTimeout(function(){a(this).trigger("scrolled.automad")},10)}),a(window).on("load scrolled.automad",function(){var a=t.scrollTop(),o="am-scrolled";a>30?e.addClass(o):e.removeClass(o)})}},a(document).ready(t.scrollPosition.init)}(window.Automad=window.Automad||{},jQuery),function(t,a){t.scrollbars={defaults:{scrollToItem:!1},dataAttr:"data-am-scroll-box",init:function(){var e=t.scrollbars,o=t.util
;a("["+e.dataAttr+"]").each(function(){var t=a(this),n=t.data(o.dataCamelCase(e.dataAttr)),i=a.extend({},e.defaults,n);if(t.mCustomScrollbar({scrollbarPosition:"inside",theme:"minimal-dark",autoHideScrollbar:!0,scrollInertia:50,scrollButtons:{enable:!1},callbacks:{onScroll:function(){t.trigger("scrolled.automad")},onUpdate:function(){t.trigger("scrolled.automad")}}}),i.scrollToItem){var d=t.find(i.scrollToItem);d.length&&setTimeout(function(){
d.offset().top+180>a(window).height()&&t.mCustomScrollbar("scrollTo",function(){return d.offset().top-a(window).height()+180},{scrollInertia:200})},150)}})}},a(document).ready(t.scrollbars.init)}(window.Automad=window.Automad||{},jQuery),function(t,a){t.siteTree={class:{active:"am-u-active",iconOpen:"am-tree-icon-open",iconClose:"am-tree-icon-close",toggle:"am-tree-toggle"},dataAttr:"data-am-tree",urlAsValue:function(e,o){
var n=t.siteTree,i=e.find('a[href^="?"]'),d=e.find("."+n.class.active+' > a[href^="?"]');d.length>0&&o.val(decodeURIComponent(d.attr("href").split("=")[1])),i.click(function(t){t.preventDefault();var i=a(this),d=i.parent(),r=decodeURIComponent(i.attr("href").split("=")[1]);e.find("."+n.class.active).removeClass(n.class.active),d.addClass(n.class.active),d.find("> a").has("."+n.class.iconOpen).click(),o.val(r).trigger("change")})},init:function(){var e=t.siteTree
;a("["+e.dataAttr+"]").each(function(){var o=a(this),n=o.data(t.util.dataCamelCase(e.dataAttr));o.find("li li").has("li").each(function(){var t=a(this),o=t.children("ul"),n=a("<a></a>",{class:e.class.toggle,href:"#"}).prependTo(t),i=a("<i></i>").prependTo(n);t.hasClass(e.class.active)||t.find("."+e.class.active).length>0?i.addClass(e.class.iconClose):(i.addClass(e.class.iconOpen),o.hide()),n.click(function(t){t.preventDefault(),o.toggle(),i.toggleClass(e.class.iconOpen+" "+e.class.iconClose)})
}),n.length>0&&e.urlAsValue(o,a(n))})}},a(document).ready(t.siteTree.init)}(window.Automad=window.Automad||{},jQuery),function(t,a){t.status={dataAttr:"data-am-status",get:function(){var e=t.status;a("["+e.dataAttr+"]").each(function(){var o=a(this),n=o.data(t.util.dataCamelCase(e.dataAttr));a.post("?ajax=status",{item:n},function(t){o.html(t.status)},"json")})},init:function(){var e=a(document),o=t.status;e.ready(function(){o.get()}),e.ajaxComplete(function(t,a,e){"?ajax=status"!=e.url&&o.get()
})}},t.status.init()}(window.Automad=window.Automad||{},jQuery),function(t,a,e){t.switcher={dataAttr:{switcher:"data-am-u-switcher",tab:"data-am-tab"},getActiveTab:function(){return window.location.hash?a("["+t.switcher.dataAttr.tab+'="'+window.location.hash.substr(1)+'"]').index():0}},e.on("beforeready.uk.dom",function(){a.extend(e.components.switcher.prototype.defaults,{active:t.switcher.getActiveTab()})}),a(window).on("hashchange",function(){
var e=a("["+t.switcher.dataAttr.switcher+"]"),o=e.children(".am-u-active"),n=t.switcher.getActiveTab();o.index()!=n&&e.children("button").eq(n).click()}),a(document).on("ready",function(){a("["+t.switcher.dataAttr.switcher+"]").on("show.uk.switcher",function(a,e){window.location.hash=e.data(t.util.dataCamelCase(t.switcher.dataAttr.tab))})})}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a,e){t.tags={containerId:"am-taggle",inputId:"am-input-data-tags",dataAttr:"data-am-tags",
init:function(){var o=t.tags,n=a("#"+o.containerId);if(n.length){var i=t.util,d=a("#"+o.inputId),r=n.data(i.dataCamelCase(o.dataAttr)),l=new Taggle(o.containerId,{tags:r.tags,preserveCase:!0,submitKeys:[188,9],focusInputOnContainerClick:!0,placeholder:"",saveOnBlur:!1,clearOnBlur:!0,onTagAdd:function(){s(),d.trigger("change")},onTagRemove:function(){s(),d.trigger("change")}}),s=function(){d.val(l.getTagValues().sort().join(", "))};s(),n.removeAttr("id"),
$inputWrapper=a(l.getInput()).wrap('<div class="am-u-autocomplete"></div>').parent(),$autocomplete=e.autocomplete($inputWrapper,{source:r.autocomplete,minLength:1}),$autocomplete.on("selectitem.uk.autocomplete",function(t,a,e){l.add(a.value)}),a(l.getInput()).on("change",function(){a(this).val("")})}}},a(document).on("ajaxComplete",t.tags.init)}(window.Automad=window.Automad||{},jQuery,UIkit),function(t,a){t.textarea={selector:"textarea.am-u-form-controls:not([data-am-u-htmleditor])",
handleTabs:function(t){if(9===t.keyCode){t.preventDefault();var e=this.selectionStart,o=this.selectionEnd,n=a(t.target),i=n.val();n.val(i.substring(0,e)+"\t"+i.substring(o)),this.selectionStart=this.selectionEnd=e+1}},init:function(){var e=t.textarea,o=a(document);o.on("keyup focus focusout update.automad.textarea",e.selector,e.resize),o.on("drop cut paste",e.selector,function(t){var e=a(t.target);setTimeout(function(t){e.trigger("update.automad.textarea")},50)}),o.ajaxComplete(function(){
a(e.selector).trigger("update.automad.textarea")}),o.on("ready",function(){a(e.selector).trigger("update.automad.textarea")}),o.on("click",".am-u-accordion-title",function(){setTimeout(function(){a(e.selector).trigger("update.automad.textarea")},50)}),a(window).resize(function(){a(e.selector).trigger("update.automad.textarea")}),o.on("keydown",e.selector,e.handleTabs)},resize:function(t){
var e=a(t.target),o=e.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />"),n=a("<div></div>").appendTo("body").hide().width(e.width()).html(o+" ").css({"white-space":"pre-wrap","word-wrap":"break-word","overflow-wrap":"break-word","font-family":e.css("font-family"),"font-size":e.css("font-size"),"line-height":e.css("line-height"),"letter-spacing":e.css("letter-spacing")});e.height(n.height()),n.remove()}},t.textarea.init()}(window.Automad=window.Automad||{},jQuery),
function(t,a){t.toggle={labelDataAttr:"data-am-toggle",class:{active:"am-u-active"},checkbox:function(e){t.toggle.update(a(e.target))},init:function(){a("["+t.toggle.labelDataAttr+"] input").each(function(){t.toggle.update(a(this))})},radio:function(e){a('input[name="'+a(e.target).attr("name")+'"]').each(function(){t.toggle.update(a(this))})},update:function(e){var o=t.toggle,n=e.parent(),i=n.data(t.util.dataCamelCase(o.labelDataAttr))
;if(e.is(":checked")?n.addClass(o.class.active):n.removeClass(o.class.active),i){var d=a(i);e.is(":checked")?d.addClass(o.class.active):d.removeClass(o.class.active)}}},a(document).on("change","["+t.toggle.labelDataAttr+'] [type="checkbox"]',t.toggle.checkbox),a(document).on("change","["+t.toggle.labelDataAttr+'] [type="radio"]',t.toggle.radio),a(document).on("ready ajaxComplete",t.toggle.init)}(window.Automad=window.Automad||{},jQuery),function(t,a){
a(document).on("ready ajaxComplete",function(){setTimeout(function(){a("html.am-u-touch [data-am-u-tooltip]").removeAttr("data-am-u-tooltip")},200)})}(window.Automad=window.Automad||{},jQuery),function(t,a){t.upload={dataAttr:{url:"data-am-url",dropzoneText:"data-am-dropzone-text",browseText:"data-am-browse-text"},selectors:{modal:"#am-upload-modal",container:"#am-upload-container"},$modal:"",$container:"",$close:"",page:"",$dropzone:a("<div></div>",{class:"am-files-dropzone am-u-hidden-touch"}),
$input:a('<input type="file" multiple />'),$browse:a("<button></button>",{class:"am-u-button am-u-button-success am-u-button-large am-u-width-1-1 am-u-margin-small-top"}).click(function(){return t.upload.$input.click(),!1}),init:function(e){var o=t.upload,n=t.util,i=o.dataAttr;o.$modal=a(o.selectors.modal),o.$container=a(o.selectors.container).empty(),o.page=o.$modal.data(n.dataCamelCase(i.url)),
o.$dropzone.html('<i class="am-u-icon-mouse-pointer"></i>&nbsp;&nbsp;'+o.$modal.data(n.dataCamelCase(i.dropzoneText))).appendTo(o.$container),o.$input.appendTo(o.$dropzone).hide(),o.$browse.html('<i class="am-u-icon-folder-open"></i>&nbsp;&nbsp;'+o.$modal.data(n.dataCamelCase(i.browseText))).insertAfter(o.$dropzone),o.$close=o.$modal.find(".am-u-modal-close"),o.plugin(),a(o.selectors.modal).on("hide.uk.modal",{$filesForm:o.$modal.closest("form")},o.refresh)},plugin:function(){var e=t.upload
;e.$input.fileupload({url:"?ajax=upload",dataType:"json",dropZone:e.$dropzone,sequentialUploads:!0,singleFileUploads:!0,formData:[{name:"url",value:e.page}],add:function(o,n){var i="";a.each(n.files,function(a){i+='<div class="am-text-white am-u-text-truncate">'+n.files[a].name+'</div><div class="am-u-text-small am-u-text-muted">'+t.util.formatBytes(n.files[a].size)+"</div>"}),n.context=a("<div></div>",{class:"am-u-margin-top"}).appendTo(e.$container),a(i).appendTo(n.context),
a('<div class="am-u-progress am-u-progress-striped am-u-active"><div class="am-u-progress-bar"></div></div>').appendTo(n.context),n.context.find(".am-u-progress-bar").width("0px"),n.submit(),e.$close.prop("disabled",!0)},progress:function(t,a){var e=parseInt(a.loaded/a.total*100,10);a.context.find(".am-u-progress-bar").width(e+"%").text(e+" %")},stop:function(t){e.$close.prop("disabled",!1)},done:function(a,e){e.context.find(".am-u-progress").removeClass("am-u-progress-striped am-u-active"),
e.result.error?e.context.find(".am-u-progress").addClass("am-u-progress-danger").find(".am-u-progress-bar").text(e.result.error):e.context.find(".am-u-progress").addClass("am-u-progress-success"),e.result.debug&&t.debug.log("upload",e.result.debug)},fail:function(t,a){a.context.find(".am-u-progress").addClass("am-u-progress-danger").removeClass("am-u-progress-striped am-u-active"),a.context.find(".am-u-progress-bar").text("Error")}})},refresh:function(t){t.data.$filesForm.empty().submit()}},
a(document).on("click",'[href="'+t.upload.selectors.modal+'"]',t.upload.init),a(document).on("drop dragover",t.upload.selectors.modal,function(t){t.preventDefault()})}(window.Automad=window.Automad||{},jQuery),function(t,a){t.util={dataCamelCase:function(t){return t=t.replace(/data-/g,""),t=t.replace(/\-[a-z]/g,function(t){return t.charAt(1).toUpperCase()})},formatBytes:function(t){
return"number"!=typeof t?"":t>=1e9?(t/1e9).toFixed(2)+" gb":t>=1e6?(t/1e6).toFixed(2)+" mb":(t/1e3).toFixed(2)+" kb"}}}(window.Automad=window.Automad||{},jQuery);